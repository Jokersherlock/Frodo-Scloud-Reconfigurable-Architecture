# 存储系统

存储系统由**Bank RAM**,**Accumulator**和**Bus**组成

## Bank RAM

由5块32*512的单端口RAM组成

### S,S'的存储

补码符号位占其中一个Bank(32个)，剩下4个bank存储32个数据，每个4bit。

横向上(160bit),存储长边连续的32个数

纵向按短边连续存储,即

![img](https://ai.feishu.cn/space/api/box/stream/download/asynccode/?code=NDc2ZTRhNjg4MzM5OGM3ZGViZGVmZmJmNGJiZTRmYjZfS29BU3lINE1PVmk5RTE4TUZnZkkyaVNkSFF1TWpiOWZfVG9rZW46RURFS2IyNDFPb1V5WGR4Y0FoemNBOGUzbkFoXzE3NjQzMTAzNzE6MTc2NDMxMzk3MV9WNA)

![img](https://ai.feishu.cn/space/api/box/stream/download/asynccode/?code=N2NkZDJlZDFlNjk3MDU0MjRiZjc1MGIyYzA4MDliNzJfaWNRQmozRUM5U3BwQUdrdHA3a3lJN2U5QmwxdEtkVUZfVG9rZW46TVhiUWJxMkNSb2VoMDV4aHdLVmNpc2w0bjBjXzE3NjQzMTAzNzg6MTc2NDMxMzk3OF9WNA)

其余时候可作为正常的单端口RAM进行读写

## Accumulator区

共16块,每块为64*336的伪双端口RAM

分为4组，每组4个

存在两种读写模式

**mode 0**:写覆盖模式,此时使用读端口正常读数据,写端口会将结果直接写入ram中

**mode 1**:写累加模式,此时读端口将ram数据取出,加上输入的数据,再存储ram中,内部是一个流水线,因此可持续进行

### A的缓存

16块分为前8块和后8块,A将使用空闲的8块进行缓存

8块可分为前4块和后4块,每次A将读一大块,写一大块

A的一行写入到1块中

因此在读取A时,每次读取出A的4*4的大小,可供1个engine使用

### B/E的存储

根据MMU的设计情况待定,只需1个B占据其中8块即可

